<head>
    <link rel="stylesheet" href="../../assets/css/north.css" type="text/css" />
</head>
<meta charset="UTF-8" />
<div class="main-content container-fluid">
    <div class="row">
        <div class="col-md-12">
            <div class="tab-container">
                <ul id="orderTab" role="tablist" class="nav nav-tabs">
                    <li id="orderTab_0" class="nav-item">
                        <a data-toggle="tab" role="tab" class="nav-link active show" href="#html/order/sellOrder_add/order_0.html" aria-selected="true">
                            新订单0
                        </a>
                    </li>
                </ul>
                <div class="tab-content">
                    <form action="/sellOrders/add" method="post" id="defaultForm">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="card card-border-color card-border-color-primary">
                                    <div class="card-header card-header-divider">
                                        <span>订单编号:</span>
                                        <span id="orderId"></span>
                                        <input type="hidden" id="id" name="id">
                                        <div class="tools">
                                            <span id="showOrderStatus" class="card-subtitle">订单状态:</span>
                                            <input type="hidden" id="orderStatus" name="orderStatus">
                                        </div>
                                        <!-- <span class="card-subtitle">These are the basic bootstrap form elements</span> -->
                                    </div>

                                    <div class="card-body">
                                        <div class="form-group row">
                                            <div class="col-md-6">
                                                <div class="row">
                                                    <div class="col-4">
                                                        <label for="accPlat" class="col-12 font-normal text-sm-left">平台ID</label>
                                                        <div class="input-group mb-3">
                                                            <input type="text" id="accPlat" name="ctlId" class="form-control">
                                                            <div class="input-group-append">
                                                                <button type="button" class="btn btn btn-primary mdi mdi-search" data-toggle="modal" data-target="#searchCustomerModal"></button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col">
                                                        <label for="address" class="col-12 font-normal text-sm-left">客户地址</label>
                                                        <input type="text" id="address" name="address" class="form-control" data-parsley-error-message="客户地址不能为空" required>
                                                    </div>

                                                </div>
                                                <div class="row row-space-top">
                                                    <div class="col-4">
                                                        <label for="customerName" class="col-12 font-normal text-sm-left">客户姓名</label>
                                                        <input type="text" id="customerName" name="cltName" class="form-control" data-parsley-error-message="客户姓名不能为空" required>
                                                    </div>
                                                    <div class="col">
                                                        <label for="tel" class="col-12 font-normal text-sm-left">联系电话</label>
                                                        <input type="text" id="tel" name="tel" class="form-control" data-parsley-error-message="联系电话不能为空" required>
                                                    </div>
                                                </div>
                                                <div class="row row-space-top">
                                                    <div class="col-4">
                                                        <label for="platform" class="col-12 font-normal text-sm-left">来源平台</label>
                                                        <input type="text" id="platform" name="platform" class="form-control">
                                                    </div>
                                                    <div class="col">
                                                        <label for="customerRemark" class="col-12 font-normal text-sm-left">客户备注</label>
                                                        <textarea id="customerRemark" form="defaultForm" name="userRemark" class="form-control" placeholder="请输入客户的备注"></textarea>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="row">
                                                    <div class="col-6">
                                                        <label for="recoSendDate" class="col-12 font-normal text-sm-left">建议发货日期:</label>
                                                        <input id="recoSendDate" name="recoSendDate" type="text" data-min-view="2" data-date-format="yyyy-mm-dd" class="form-control datetimepicker"
                                                            data-parsley-error-message="建议发货日期不能为空" required>
                                                    </div>
                                                </div>
                                                <div class="row row-double-space-top">
                                                    <div class="col">
                                                        <p id="approvDate">审批日期:</p>
                                                    </div>
                                                    <div class="col">
                                                        <p id="delivrDate">发货日期:</p>
                                                    </div>
                                                    <div class="col flex-center">
                                                    </div>
                                                </div>
                                                <div class="row row-space-top">
                                                    <div class="col">
                                                        <p id="approvPerson">审批人:</p>
                                                    </div>
                                                    <div class="col">
                                                        <p id="delivrPerson">发货人:</p>
                                                    </div>
                                                    <div class="col">
                                                    </div>
                                                </div>
                                                <div class="row row-space-top">
                                                    <div class="col">
                                                        <p id="confirmDate">确认日期:</p>
                                                    </div>
                                                    <div class="col">
                                                        <p id="editDate">修改日期:</p>
                                                    </div>
                                                    <div class="col">
                                                        <p id="createDate">制单日期:</p>
                                                    </div>
                                                </div>
                                                <div class="row row-space-top">
                                                    <div class="col">
                                                        <p id="confrimPerson">确认人:</p>
                                                    </div>
                                                    <div class="col">
                                                        <p id="editPerson">修改人:</p>
                                                    </div>
                                                    <div class="col">
                                                        <p id="createPerson">制单人:</p>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <!--Responsive table-->
                            <div class="col-sm-12">
                                <div class="card card-table">
                                    <div class="card-header">订单构成信息
                                        <div class="tools dropdown margin-lr-12">
                                            <button type="button" class="btn btn-space btn-success" data-toggle="modal" data-target="#addProductModal" data-whatever="add">新增产品
                                            </button>
                                            <button type="button" class="btn btn-space btn-danger" onclick="deleteSuborder()">删除产品
                                            </button>
                                        </div>
                                    </div>
                                    <div class="card-body">
                                        <div class="padding-lr-common">
                                            <table id="subOrdTab" class="table table-hover">

                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <div class="card">
                                    <div class="row padding-lr-common row-space-top">
                                        <div class="col">
                                            <label class="text-sm-left" for="orderCost">订单额:</label>
                                            <input type="text" class="form-control form-control-sm" id="orderCost" name="orderCost" value="0.0" readonly="readonly">
                                            <input id="cost" name="cost" type='hidden' value="0">
                                        </div>
                                        <div class="col">
                                            <label class="text-sm-left" for="transCost">运费:</label>
                                            <input type="text" class="form-control form-control-sm" id="transCost" name="transCost" value="0.0" data-parsley-trigger="input"
                                                data-parsley-type="number" data-parsley-error-message="只能输入两位小数" required>
                                        </div>
                                        <div class="col">
                                            <label class="text-sm-left" for="totalCost">合计:</label>
                                            <input type="text" class="form-control form-control-sm" id="totalCost" name="totalCost" value="0.0" readonly="readonly">
                                        </div>
                                        <div class="col">
                                            <label class="text-sm-left" for="income">实收:</label>
                                            <input type="text" class="form-control form-control-sm" id="income" name="income" value="0.0" data-parsley-trigger="input"
                                                data-parsley-type="number" data-parsley-error-message="只能输入两位小数" required>
                                        </div>
                                        <div class="col">
                                            <label class="text-sm-left">收款账号:</label>
                                            <input type="text" class="form-control form-control-sm" id="recivAccount" name="recivAccount" data-parsley-error-message="收款账户不能为空"
                                                required>
                                        </div>
                                    </div>
                                </div>
                                <div class="card">
                                    <div class="row justify-content-md-center">
                                        <div class="col-md-4 layout-center line-center">
                                            <p class="margin-top-bottom-common">
                                                <button class="btn btn-primary btn-lg" type="button" onclick="submitConfirm()">确认下单
                                                </button>
                                                <button class="btn btn-success btn-lg" type="button" onclick="submitSave()">保 存
                                                </button>
                                                <button class="btn btn-secondary btn-lg" type="button" id="_cancel" onclick="cancelSubmit()">取 消
                                                </button>
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                    <!-- 新增子订单Modal -->
                    <div id="addProductModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="addProductModal">
                        <div class="modal-dialog modal-lg" role="document" style="max-width:100%;width:65%;">
                            <div class="modal-content" style="max-width:100%;width:100%;">
                                <div class="modal-header ns-modal-header">
                                    <h4 class="modal-title" id="addProductModal">子订单编号:</h4>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <div class="row">
                                        <div class="col-md-3">
                                            <label for="selectPro">物料成品ID：</label>
                                            <div>
                                                <select id="selectPro" name="selectPro" class="select2 select2-hidden-accessible form-control" data-width="100%" tabindex="-1"
                                                    aria-hidden="true" required>
                                                    <option value="">无</option>
                                                    <option value="-1">非成品/FCP</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <label for="materialId" class="col-12 text-sm-left">物料ID</label>
                                            <input type="text" id="materialId" readonly="readonly" name="matid" class="form-control" data-parsley-error-message="物料ID不能为空"
                                                required>
                                        </div>
                                        <div class="col-md-3">
                                            <label for="materialName" class="col-12 text-sm-left">物料名称</label>
                                            <input type="text" id="materialName" readonly="readonly" name="name" class="form-control" data-parsley-error-message="物料名称不能为空"
                                                required>
                                        </div>
                                    </div>
                                    <div class="row row-space-top">
                                        <div class="col-md-3">
                                            <label for="curtainWidth" class="col-12 text-sm-left">窗帘宽度</label>
                                            <input type="text" id="curtainWidth" name="curtainWidth" class="form-control" data-parsley-type="number" data-parsley-error-message="只能输入两位小数"
                                                required>
                                        </div>
                                        <div class="col-md-3">
                                            <label for="curtainHeight" class="col-12 text-sm-left">窗帘高度</label>
                                            <input type="text" id="curtainHeight" name="curtainHeight" class="form-control" data-parsley-type="number" data-parsley-error-message="只能输入两位小数"
                                                required>
                                        </div>
                                        <div class="col-md-5">
                                            <label for="materialRemark" class="col-12 text-sm-left">加工备注</label>
                                            <textarea id="materialRemark" name="remarks" class="form-control" placeholder="请输入加工备注"></textarea>
                                        </div>
                                    </div>
                                    <div class="row row-space-top">
                                        <div class="col-md-3">
                                            <label for="installPosi" class="col-12 text-sm-left">安装位置</label>
                                            <input type="text" id="installPosi" name="installPosi" class="form-control" data-parsley-error-message="请输入安装位置" required>
                                        </div>
                                        <div class="col-md-3">
                                            <label for="saleNum" class="col-12 text-sm-left">产品数量</label>
                                            <input type="text" id="saleNum" name="saleNum" class="form-control" data-parsley-type="number" data-parsley-error-message="只能输入整数"
                                                required>
                                        </div>
                                    </div>
                                    <div class="row border-top-color margin-top-bottom-common">
                                        <div class="col-md-12">
                                            <div class="card card-table">
                                                <div class="card-header">子订单相关操作
                                                    <div class="card-body space-margin-top">
                                                        <div class="row">
                                                            <div class="col-md-4">
                                                                <select id="selectMaterial" name="selectMaterial" class="select2 select2-hidden-accessible form-control" data-width="100%"
                                                                    tabindex="-1" aria-hidden="true">
                                                                    <option value="">无</option>
                                                                </select>
                                                            </div>
                                                            <div class="col-md-2">
                                                                <button type="button" class="btn btn-space btn-success" onclick="addMat()">新增材料
                                                                </button>
                                                            </div>
                                                            <div class="col-md-6">
                                                                <!-- <input id="imgUrlInP" parsley-type="url" type="url" placeholder="图片URL地址">
                                                                <button type="button" class="btn btn-space btn-secondary">上传网络图片
                                                                </button> -->
                                                                <div id="myDropzone" class="dropzone">
                                                                </div>
                                                                <button id="submitImg" type="button" class="btn btn-space btn-secondary">
                                                                    确认上传图片
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <!--Responsive table-->
                                        <div class="col-md-12">
                                            <div class="card card-table">
                                                <div class="card-header">子订单构成信息
                                                    <div class="tools dropdown margin-lr-12">
                                                        <button type="button" class="btn btn-space btn-danger" onclick="deleteMaterielTableRow()">删除材料
                                                        </button>
                                                    </div>
                                                </div>
                                                <div class="card-body">
                                                    <table id="proMatTable" class="table table-hover">

                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row justify-content-end">
                                        <label for="subtotal" class="col-sm-3 text-sm-right">合计:</label>
                                        <div class="col-sm-3">
                                            <input id="subtotal" name="subtotal" type="text" readonly="readonly" value="0">
                                            <input id="subCost" name="subCost" type='hidden' value="0">
                                        </div>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                                    <button id="insertBtn" type="button" class="btn btn-primary" onclick="insertSuborderTab()"></button>
                                </div>
                            </div>
                            <!-- /.modal-content -->
                        </div>
                        <!-- /.modal-dialog -->
                    </div>
                    <!-- /.modal -->

                    <!-- SearchCustomer Modal -->
                    <div id="searchCustomerModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="searchCustomerModalLabel">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header ns-modal-header">
                                    <h4 class="modal-title" id="searchCustomerModalLabel">查询客户</h4>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <div class="input-group mb-3">
                                        <input type="text" id="searchCustomerCondition" name="searchCustomerCondition" placeholder="输入客户姓名或平台ID" class="form-control">
                                        <div class="input-group-append">
                                            <button type="button" class="btn btn btn-primary mdi mdi-search" onclick="searchCustomer()"></button>
                                        </div>
                                    </div>
                                    <table id="customerTable" class="table table-sm"></table>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                                    <button id="insertBtn" type="button" class="btn btn-primary" onclick="completeSearchCustomer()">确定</button>
                                </div>
                            </div>
                            <!-- /.modal-content -->
                        </div>
                        <!-- /.modal-dialog -->
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="../../assets/js/order/order_edit.js" type="text/javascript"></script>